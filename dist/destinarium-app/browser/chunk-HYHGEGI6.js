import{a as A}from"./chunk-KPM47ZNZ.js";import{C as E,G as j,V as D,ma as F,sa as T,ua as N,w as I,x as S,z,za as q}from"./chunk-23WGA5L7.js";import{o as b}from"./chunk-XVKP5Z4H.js";import"./chunk-T7VJLMO5.js";import{Cb as u,Eb as h,Ic as v,Jc as k,Ob as a,Pb as M,Pc as w,Sa as c,Ta as _,Tb as O,Ub as y,Vb as x,W as m,ea as C,fa as g,jb as f,lb as l,ub as r,vb as i,wb as P}from"./chunk-I7QEIFBZ.js";import"./chunk-YHOLSLLF.js";function W(n,p){n&1&&(r(0,"div"),a(1,"Buscando..."),i())}function V(n,p){if(n&1&&(r(0,"div",10),a(1),i()),n&2){let t=h();c(),M(t.error)}}function U(n,p){if(n&1&&P(0,"app-full-card-places",13),n&2){let t=p.$implicit,e=h(2);l("card",e.getCardData(t))}}function Z(n,p){if(n&1&&(r(0,"div",11),f(1,U,1,1,"app-full-card-places",12),i()),n&2){let t=h();c(),l("ngForOf",t.places)}}var Y=(()=>{class n{constructor(t,e){this.placesService=t,this.dialog=e,this.query="",this.loading=!1,this.error="",this.places=[],this.currentSort="title-a-z",this.sortOptions=[{value:"title-a-z",label:"T\xEDtulo (A-Z)"},{value:"title-z-a",label:"T\xEDtulo (Z-A)"},{value:"rating-0-5",label:"Valoraci\xF3n (ascendente)"},{value:"rating-5-0",label:"Valoraci\xF3n (descendente)"}]}ngOnInit(){this.loadDefaultPlaces()}loadDefaultPlaces(){this.loading=!0,this.error="",this.placesService.searchPlaces("restaurantes Barcelona").subscribe({next:t=>{this.places=t,this.loading=!1},error:t=>{this.loading=!1,this.error="Error al cargar lugares predeterminados.",console.error(t)}})}search(){this.query.trim()&&(this.loading=!0,this.error="",this.places=[],this.placesService.searchPlaces(this.query).subscribe({next:t=>{this.places=t,this.loading=!1,(!t||t.length===0)&&(this.error="No se encontr\xF3 ning\xFAn lugar con esa b\xFAsqueda.")},error:t=>{this.loading=!1,this.error="Error al buscar el lugar.",console.error(t)}}))}getCardData(t){let e="../../../assets/predeterminada-img.webp",o=t.photos?.find(d=>!!d),s=o?.startsWith("http");return{link:`/puntos-interes/punto-interes/${t.place_id}`,imageUrl:o?s?o:`http://localhost:3000/uploads/${o}`:e,title:t.name,address:t.address||"Direcci\xF3n desconocida",categories:t.types||["Sin categor\xEDa"],rating:t.rating??"No disponible"}}openSortDialog(){this.dialog.open(N,{data:{currentSort:this.currentSort,options:this.sortOptions}}).afterClosed().subscribe(e=>{e&&(this.currentSort=e,this.applySort())})}applySort(){switch(this.currentSort){case"title-a-z":this.places.sort((t,e)=>t.name.localeCompare(e.name));break;case"title-z-a":this.places.sort((t,e)=>e.name.localeCompare(t.name));break;case"rating-0-5":this.places.sort((t,e)=>(t.rating??0)-(e.rating??0));break;case"rating-5-0":this.places.sort((t,e)=>(e.rating??0)-(t.rating??0));break;case"category":this.places.sort((t,e)=>{let o=t.types?.[0]||"",s=e.types?.[0]||"";return o.localeCompare(s)});break;default:break}}static{this.\u0275fac=function(e){return new(e||n)(_(A),_(F))}}static{this.\u0275cmp=C({type:n,selectors:[["app-points-of-interest"]],decls:20,vars:4,consts:[[1,"main-container"],[1,"search-container"],["type","text","placeholder","Escribe un punto de inter\xE9s",3,"ngModelChange","keydown.enter","ngModel"],[3,"click"],[4,"ngIf"],["style","color:red",4,"ngIf"],[1,"action-buttons"],[1,"btn-filtro"],[1,"btn-ordenar",3,"click"],["class","cards-container",4,"ngIf"],[2,"color","red"],[1,"cards-container"],[3,"card",4,"ngFor","ngForOf"],[3,"card"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h1"),a(2,"Puntos de inter\xE9s"),i(),r(3,"div",1)(4,"input",2),x("ngModelChange",function(d){return y(o.query,d)||(o.query=d),d}),u("keydown.enter",function(){return o.search()}),i(),r(5,"button",3),u("click",function(){return o.search()}),r(6,"mat-icon"),a(7,"search"),i()()(),f(8,W,2,0,"div",4)(9,V,2,1,"div",5),r(10,"div",6)(11,"button",7)(12,"mat-icon"),a(13,"tune"),i(),a(14," Filtrar "),i(),r(15,"button",8),u("click",function(){return o.openSortDialog()}),r(16,"mat-icon"),a(17,"sort"),i(),a(18," Ordenar "),i()(),f(19,Z,2,1,"div",9),i()),e&2&&(c(4),O("ngModel",o.query),c(4),l("ngIf",o.loading),c(),l("ngIf",o.error),c(10),l("ngIf",o.places==null?null:o.places.length))},dependencies:[v,k,z,E,j,T,I],styles:["*[_ngcontent-%COMP%], html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{font-family:Jura,sans-serif;font-size:1rem;font-weight:400}h1[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:700;margin-bottom:1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1.5rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}p[_ngcontent-%COMP%]{font-size:1rem;font-weight:400}.text-center[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{font-size:.9rem;border:none;border-radius:10px;padding:.7rem 0;cursor:pointer}button.primary[_ngcontent-%COMP%]{border:1px solid #106A8A;background-color:#106a8a;color:#fff}button.primary[_ngcontent-%COMP%]:hover{background-color:#fff;color:#106a8a}button.secondary[_ngcontent-%COMP%]{border:1px solid #16A8C1;background-color:#fff;color:#16a8c1}button.secondary[_ngcontent-%COMP%]:hover{background-color:#16a8c1;color:#fff}button.call-to-action[_ngcontent-%COMP%]{border:1px solid #F2C01C;background-color:#f2c01c;color:#000}button.call-to-action[_ngcontent-%COMP%]:hover{background-color:#fff;color:#f2c01c;font-weight:700}.btn-large[_ngcontent-%COMP%]{position:relative;justify-content:center;text-align:center;width:300px}.btn-large[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%)}.btn-large[_ngcontent-%COMP%]   .icon-left[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%)}.btn-small[_ngcontent-%COMP%]{position:relative;justify-content:center;text-align:center;width:150px}.btn-small[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%)}.btn-small[_ngcontent-%COMP%]   .icon-left[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%)}.btn-rounded[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:50%;width:36px;height:36px}a[_ngcontent-%COMP%]{font-size:1rem;text-decoration:none}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{font-weight:700;text-decoration:underline}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:1.5rem auto;width:80vw}.layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;gap:1rem 0}.main-content[_ngcontent-%COMP%]{padding-top:80px;flex:1}@media (min-width: 769px){.main-content[_ngcontent-%COMP%]{padding-top:140px}}.error[_ngcontent-%COMP%]{color:red}#toast[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;color:#fff;text-align:center;border-radius:10px;padding:16px;z-index:1;font-size:14px;margin-left:auto;margin-right:auto}#toast.requestOk[_ngcontent-%COMP%]{background-color:#16a8c1}#toast.requestKo[_ngcontent-%COMP%]{background-color:red}#toast.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:_ngcontent-%COMP%_fadein .5s,fadeout .5s 2.5s;animation:_ngcontent-%COMP%_fadein .5s,fadeout .5s 2.5s}@-webkit-keyframes _ngcontent-%COMP%_fadein{0%{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes _ngcontent-%COMP%_fadein{0%{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@-webkit-keyframes _ngcontent-%COMP%_fadeout{0%{bottom:30px;opacity:1}to{bottom:0;opacity:0}}@keyframes _ngcontent-%COMP%_fadeout{0%{bottom:30px;opacity:1}to{bottom:0;opacity:0}}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:2rem 0}.action-buttons[_ngcontent-%COMP%]   .btn-filtro[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .btn-ordenar[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background-color:#fff;border:1px solid black;border-radius:0;width:110px;padding:.75rem;text-align:center}.search-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:700px;margin-bottom:1.5rem}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.2rem;font-size:1rem;border-radius:25px;border:1px solid #ccc}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:0rem 3rem;width:100%}"]})}}return n})();var J=[{path:"",component:Y}],B=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=g({type:n})}static{this.\u0275inj=m({imports:[b.forChild(J),b]})}}return n})();var pt=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=g({type:n})}static{this.\u0275inj=m({imports:[w,D,B,q,S]})}}return n})();export{pt as PointsOfInterestModule};
