import{a as W,ba as J,ca as G,da as Q,ea as X,ja as Z,w as Y}from"./chunk-23WGA5L7.js";import{j as H,l as T}from"./chunk-XVKP5Z4H.js";import{Cb as x,Eb as d,Ib as L,Ic as K,Jc as U,Na as R,Nb as S,Nc as q,Oa as v,Ob as a,Pb as y,Qb as f,Rb as V,Sa as o,Sb as $,Ta as h,V as I,_ as M,_b as P,ac as D,cc as E,db as A,ea as z,g as F,jb as g,lb as l,ma as p,na as _,pc as B,ub as s,vb as i,wb as N,xb as O,yb as w,zb as C}from"./chunk-I7QEIFBZ.js";import{e as b}from"./chunk-YHOLSLLF.js";var k=class{constructor(c,e,r,t,u,m,ne,ie,ae,re,oe,se,ce,le,me,de,pe){this.itineraryId=c,this.title=e,this.publicationDate=r,this.userId=t,this.duration=u,this.destination=m,this.startDate=ne,this.endDate=ie,this.rating=ae,this.budget=re,this.categories=oe,this.coverImage=se,this.userAlias=ce,this.transports=le,this.accommodations=me,this.restaurants=de,this.days=pe}};var j=(()=>{class n{constructor(){this.itineraryIdSubject=new F(null),this.redirectMsgKey="redirectLoginMsg"}setItineraryId(e){this.itineraryIdSubject.next(e)}getItineraryId(){return this.itineraryIdSubject.asObservable()}getItineraryIdValue(){return this.itineraryIdSubject.getValue()}setLoginRedirectMessage(e){localStorage.setItem(this.redirectMsgKey,e)}getLoginRedirectMessage(){return localStorage.getItem(this.redirectMsgKey)}clearLoginRedirectMessage(){localStorage.removeItem(this.redirectMsgKey)}managementToast(e,r,t,u){return b(this,null,function*(){let m=document.getElementById(e);m&&(r?(m.className="show requestOk",m.textContent=u??"El proceso se ha compleatdo con \xE9xito",yield this.wait(2500),m.className=m.className.replace("show","")):(m.className="show requestKo",t?.messageDetail?m.textContent="Se ha producido un error, show logs. Message: "+t?.message+". Message detail: "+t?.messageDetail+". Status code: "+t?.statusCode:m.textContent="Se ha producido un error, show logs. Message: "+t?.message+". Status code: "+t?.statusCode,yield this.wait(2500),m.className=m.className.replace("show","")))})}errorLog(e){console.error("path:",e.path),console.error("timestamp:",e.timestamp),console.error("message:",e.message),console.error("messageDetail:",e.messageDetail),console.error("statusCode:",e.statusCode)}wait(e){return b(this,null,function*(){return new Promise(r=>{setTimeout(r,e)})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ge(n,c){if(n&1&&(s(0,"p",13),a(1),i()),n&2){let e=c.$implicit;o(),f(" ",e.title," ")}}function fe(n,c){n&1&&(s(0,"p",14),a(1," El usuario no ha informado de ning\xFAn servicio extra en este itinerario. "),i())}function ue(n,c){if(n&1&&(O(0),s(1,"a",22),a(2),i(),w()),n&2){let e=d().$implicit;o(),l("href",e.web,v),o(),y(e.web)}}function ye(n,c){n&1&&a(0,"No disponen de web")}function xe(n,c){if(n&1&&(s(0,"div",20)(1,"p")(2,"b"),a(3),i(),a(4),g(5,ue,3,2,"ng-container",21)(6,ye,1,0,"ng-template",null,1,E),i(),s(8,"p")(9,"b"),a(10,"Direcci\xF3n:"),i(),a(11),i(),s(12,"p")(13,"b"),a(14,"Precio:"),i(),a(15),i()()),n&2){let e=c.$implicit,r=S(7);o(3),y(e.type),o(),f(": ",e.name," - "),o(),l("ngIf",e.web&&e.web.trim()!=="")("ngIfElse",r),o(6),f(" ",e.address,""),o(4),f(" ",e.price," \u20AC/persona")}}function he(n,c){if(n&1){let e=C();s(0,"mat-accordion",15,0)(2,"mat-expansion-panel",16),x("opened",function(){p(e);let t=d();return _(t.panelOpenState.set(!0))})("closed",function(){p(e);let t=d();return _(t.panelOpenState.set(!1))}),s(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"mat-icon",17),a(6,"hotel"),i(),s(7,"p",18),a(8,"Alojamientos"),i()()(),g(9,xe,16,6,"div",19),i()()}if(n&2){let e=d();o(9),l("ngForOf",e.itinerary.accommodations)}}function Ce(n,c){if(n&1&&(O(0),s(1,"a",22),a(2),i(),w()),n&2){let e=d().$implicit;o(),l("href",e.web,v),o(),y(e.web)}}function be(n,c){n&1&&a(0,"No disponen de web")}function ve(n,c){if(n&1&&(s(0,"div",20)(1,"p")(2,"b"),a(3),i(),a(4),g(5,Ce,3,2,"ng-container",21)(6,be,1,0,"ng-template",null,1,E),i(),s(8,"p")(9,"b"),a(10,"Direcci\xF3n:"),i(),a(11),i(),s(12,"p")(13,"b"),a(14,"Precio medio:"),i(),a(15),i()()),n&2){let e=c.$implicit,r=S(7);o(3),y(e.type),o(),f(": ",e.name," - "),o(),l("ngIf",e.web&&e.web.trim()!=="")("ngIfElse",r),o(6),f(" ",e.address,""),o(4),f(" ",e.price," \u20AC/persona")}}function Ie(n,c){if(n&1){let e=C();s(0,"mat-accordion",15,0)(2,"mat-expansion-panel",16),x("opened",function(){p(e);let t=d();return _(t.panelOpenState.set(!0))})("closed",function(){p(e);let t=d();return _(t.panelOpenState.set(!1))}),s(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"mat-icon",17),a(6,"restaurant"),i(),s(7,"p",18),a(8,"Restaurantes"),i()()(),g(9,ve,16,6,"div",19),i()()}if(n&2){let e=d();o(9),l("ngForOf",e.itinerary.restaurants)}}function Me(n,c){if(n&1&&(O(0),s(1,"a",22),a(2),i(),w()),n&2){let e=d().$implicit;o(),l("href",e.web,v),o(),y(e.web)}}function Oe(n,c){n&1&&a(0,"No disponen de web")}function we(n,c){if(n&1&&(s(0,"div",20)(1,"p")(2,"b"),a(3),i(),a(4),g(5,Me,3,2,"ng-container",21)(6,Oe,1,0,"ng-template",null,1,E),i(),s(8,"p")(9,"b"),a(10,"Direcci\xF3n:"),i(),a(11),i()()),n&2){let e=c.$implicit,r=S(7);o(3),y(e.type),o(),f(": ",e.company," - "),o(),l("ngIf",e.web&&e.web.trim()!=="")("ngIfElse",r),o(6),f(" ",e.address,"")}}function Se(n,c){if(n&1){let e=C();s(0,"mat-accordion",15,0)(2,"mat-expansion-panel",16),x("opened",function(){p(e);let t=d();return _(t.panelOpenState.set(!0))})("closed",function(){p(e);let t=d();return _(t.panelOpenState.set(!1))}),s(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"mat-icon",17),a(6,"flight"),i(),s(7,"p",18),a(8,"Transportes"),i()()(),g(9,we,12,5,"div",19),i()()}if(n&2){let e=d();o(9),l("ngForOf",e.itinerary.transports)}}function Pe(n,c){n&1&&(s(0,"p",14),a(1," El usuario no ha a\xF1adido informaci\xF3n detallada de ninguno de los d\xEDas de este itinerario. "),i())}function De(n,c){if(n&1){let e=C();s(0,"mat-accordion",15,0)(2,"mat-expansion-panel",16),x("opened",function(){p(e);let t=d();return _(t.panelOpenState.set(!0))})("closed",function(){p(e);let t=d();return _(t.panelOpenState.set(!1))}),s(3,"mat-expansion-panel-header")(4,"mat-panel-title",18),a(5),i()(),N(6,"div",23),i()()}if(n&2){let e=c.$implicit,r=c.index;o(5),$(" D\xCDA ",r+1,": ",e.startLocation," - ",e.endLocation," "),o(),l("innerHTML",e.description,R)}}function Ee(n,c){if(n&1){let e=C();s(0,"div",24)(1,"button",25),x("click",function(){p(e);let t=d();return _(t.showMoreDays())}),a(2,"Ver m\xE1s d\xEDas"),i()()}}var Be=(()=>{class n{constructor(e,r,t,u,m){this.activatedRoute=e,this.itineraryService=r,this.sharedService=t,this.router=u,this.changeDetector=m,this.panelOpenState=A(!1),this.itinerary=new k("","",new Date,"",0,"",new Date,new Date,0,0,[],""),this.visibleDaysCount=3}ngOnInit(){let e=this.activatedRoute.snapshot.paramMap.get("id");if(!e){this.router.navigateByUrl("/");return}this.getItinerary(e)}getItinerary(e){return b(this,null,function*(){let r;this.itineraryService.getItineraryById(e).subscribe({next:t=>{t.days&&(t.days=t.days.sort((u,m)=>u.dayNumber-m.dayNumber)),this.itinerary=t,this.changeDetector.detectChanges()},error:t=>{r=t.error,this.sharedService.errorLog(r)}})})}get visibleDays(){return this.itinerary?.days?.slice(0,this.visibleDaysCount)||[]}showMoreDays(){this.visibleDaysCount+=3}setDefaultImage(e){e.target.src="../../../../assets/predeterminada-img.webp"}static{this.\u0275fac=function(r){return new(r||n)(h(H),h(W),h(j),h(T),h(B))}}static{this.\u0275cmp=z({type:n,selectors:[["app-itinerary-details"]],decls:37,vars:24,consts:[["accordion",""],["noWeb",""],[1,"main-container"],[1,"grid-columns"],["alt","Im\xE1gen portada itinerario",1,"img",3,"error","src"],[1,"container-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"section-header"],["class","paragraph-center",4,"ngIf"],["class","custom-accordion",4,"ngIf"],[1,"days-section"],["class","custom-accordion",4,"ngFor","ngForOf"],["class","container-button",4,"ngIf"],[1,"tag"],[1,"paragraph-center"],[1,"custom-accordion"],[1,"custom-panel",3,"opened","closed"],[1,"icon"],[1,"custom-panel-title"],["class","container-services",4,"ngFor","ngForOf"],[1,"container-services"],[4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[3,"innerHTML"],[1,"container-button"],[1,"link",3,"click"]],template:function(r,t){r&1&&(s(0,"div",2)(1,"h1"),a(2),i(),s(3,"div",3)(4,"div")(5,"figure")(6,"img",4),x("error",function(m){return t.setDefaultImage(m)}),i(),s(7,"figcaption")(8,"p"),a(9),P(10,"date"),i()()(),s(11,"div",5),g(12,ge,2,1,"p",6),i()(),s(13,"div")(14,"section")(15,"div",7)(16,"mat-icon"),a(17,"star"),i(),s(18,"p"),a(19,"Servicios contratados"),i()(),g(20,fe,2,0,"p",8)(21,he,10,1,"mat-accordion",9)(22,Ie,10,1,"mat-accordion",9)(23,Se,10,1,"mat-accordion",9),i()()(),s(24,"section",10)(25,"div",7)(26,"mat-icon"),a(27,"calendar_today"),i(),s(28,"p"),a(29,"Fechas itinerario:"),i(),s(30,"p"),a(31),P(32,"date"),P(33,"date"),i()(),g(34,Pe,2,0,"p",8)(35,De,7,4,"mat-accordion",11)(36,Ee,3,0,"div",12),i()()),r&2&&(o(2),y(t.itinerary.title),o(4),L("src","http://localhost:3000/uploads/",t.itinerary.coverImage,"",v),o(3),V("Publicado el ",D(10,15,t.itinerary.publicationDate,"dd/MM/yyyy")," por ",t.itinerary.userAlias,""),o(3),l("ngForOf",t.itinerary.categories),o(8),l("ngIf",t.itinerary&&t.itinerary.accommodations&&!t.itinerary.accommodations.length&&t.itinerary&&t.itinerary.restaurants&&!t.itinerary.restaurants.length&&t.itinerary&&t.itinerary.transports&&!t.itinerary.transports.length),o(),l("ngIf",t.itinerary&&t.itinerary.accommodations&&t.itinerary.accommodations.length),o(),l("ngIf",t.itinerary&&t.itinerary.restaurants&&t.itinerary.restaurants.length),o(),l("ngIf",t.itinerary&&t.itinerary.transports&&t.itinerary.transports.length),o(8),V("",D(32,18,t.itinerary.startDate,"dd/MM/yyyy")," - ",D(33,21,t.itinerary.endDate,"dd/MM/yyyy"),""),o(3),l("ngIf",t.itinerary&&t.itinerary.days&&!t.itinerary.days.length),o(),l("ngForOf",t.visibleDays),o(),l("ngIf",t.itinerary&&t.itinerary.days&&t.itinerary.days.length>t.visibleDaysCount))},dependencies:[K,U,Y,X,J,G,Q,q],styles:["*[_ngcontent-%COMP%], html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{font-family:Jura,sans-serif;font-size:1rem;font-weight:400}h1[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:700;margin-bottom:1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1.5rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}p[_ngcontent-%COMP%]{font-size:1rem;font-weight:400}.text-center[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{font-size:.9rem;border:none;border-radius:10px;padding:.7rem 0;cursor:pointer}button.primary[_ngcontent-%COMP%]{border:1px solid #106A8A;background-color:#106a8a;color:#fff}button.primary[_ngcontent-%COMP%]:hover{background-color:#fff;color:#106a8a}button.secondary[_ngcontent-%COMP%]{border:1px solid #16A8C1;background-color:#fff;color:#16a8c1}button.secondary[_ngcontent-%COMP%]:hover{background-color:#16a8c1;color:#fff}button.call-to-action[_ngcontent-%COMP%]{border:1px solid #F2C01C;background-color:#f2c01c;color:#000}button.call-to-action[_ngcontent-%COMP%]:hover{background-color:#fff;color:#f2c01c;font-weight:700}.btn-large[_ngcontent-%COMP%]{position:relative;justify-content:center;text-align:center;width:300px}.btn-large[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%)}.btn-large[_ngcontent-%COMP%]   .icon-left[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%)}.btn-small[_ngcontent-%COMP%]{position:relative;justify-content:center;text-align:center;width:150px}.btn-small[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%)}.btn-small[_ngcontent-%COMP%]   .icon-left[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%)}.btn-rounded[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:50%;width:36px;height:36px}a[_ngcontent-%COMP%]{font-size:1rem;text-decoration:none}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{font-weight:700;text-decoration:underline}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:1.5rem auto;width:80vw}.layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;gap:1rem 0}.main-content[_ngcontent-%COMP%]{padding-top:80px;flex:1}@media (min-width: 769px){.main-content[_ngcontent-%COMP%]{padding-top:140px}}.error[_ngcontent-%COMP%]{color:red}#toast[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;color:#fff;text-align:center;border-radius:10px;padding:16px;z-index:1;font-size:14px;margin-left:auto;margin-right:auto}#toast.requestOk[_ngcontent-%COMP%]{background-color:#16a8c1}#toast.requestKo[_ngcontent-%COMP%]{background-color:red}#toast.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:_ngcontent-%COMP%_fadein .5s,fadeout .5s 2.5s;animation:_ngcontent-%COMP%_fadein .5s,fadeout .5s 2.5s}@-webkit-keyframes _ngcontent-%COMP%_fadein{0%{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes _ngcontent-%COMP%_fadein{0%{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@-webkit-keyframes _ngcontent-%COMP%_fadeout{0%{bottom:30px;opacity:1}to{bottom:0;opacity:0}}@keyframes _ngcontent-%COMP%_fadeout{0%{bottom:30px;opacity:1}to{bottom:0;opacity:0}}@media (min-width: 1025px){.grid-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:3rem;width:100%;margin-bottom:2rem}}p[_ngcontent-%COMP%]{font-size:1.1rem}p.paragraph-center[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.img[_ngcontent-%COMP%]{border-radius:16px;width:100%;height:auto}.days-section[_ngcontent-%COMP%]{width:100%}.container-tags[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:1rem;width:100%;margin:1rem 0}.container-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background-color:#106a8a;color:#fff;padding:.3rem 1.2rem;border-radius:16px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:1rem;background-color:#f2c01c;padding:.75rem;width:100%;margin-bottom:1rem;border-radius:10px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem}  .custom-accordion{display:flex;flex-direction:column;margin-bottom:.75rem;width:100%}  .custom-panel{background-color:#fff9eb;box-shadow:none;border-bottom:1px solid #F2C01C}  .custom-panel .mat-expansion-panel-header{font-weight:500;font-family:Jura,sans-serif;padding:1rem}  .custom-panel .mat-expansion-panel-body{padding:1rem;font-family:Jura,sans-serif}.custom-panel-title[_ngcontent-%COMP%]{font-size:1.2rem}.icon[_ngcontent-%COMP%]{margin-right:1rem}.container-services[_ngcontent-%COMP%]{padding-bottom:1rem;margin-bottom:1rem}.container-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.container-button[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{background-color:#fff;color:#106a8a}.container-button[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0})}}return n})();var He=(()=>{class n{constructor(e,r,t){this.router=e,this.localStorageService=r,this.sharedService=t}canActivate(e,r){return this.localStorageService.get("access_token")?!0:(this.sharedService.setLoginRedirectMessage("Por favor, inicia sesi\xF3n para continuar"),this.router.navigate(["/usuario/login"]),!1)}static{this.\u0275fac=function(r){return new(r||n)(M(T),M(Z),M(j))}}static{this.\u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{j as a,He as b,k as c,Be as d};
